{"version":3,"sources":["../../../../src/components/ProjectForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useActionState, useState } from \"react\";\n// import { createProject, updateProject } from \"@/app/actions/projects\"; // Can't import server action directly to pass to form action sometimes without bind, but here we can use them via prop or import\nimport Link from 'next/link';\n\ninterface ProjectFormProps {\n    action: (payload: FormData) => void;\n    initialData?: any;\n    mode: \"create\" | \"edit\";\n}\n\nexport default function ProjectForm({ action, initialData, mode }: ProjectFormProps) {\n    // Parse initial credits if they exist, otherwise default to empty array\n    const initialCredits = initialData?.credits ? JSON.parse(initialData.credits) : [];\n    const [credits, setCredits] = useState<{ role: string; name: string }[]>(initialCredits);\n    const [category, setCategory] = useState(initialData?.category || \"\");\n\n    const addCredit = () => {\n        setCredits([...credits, { role: \"\", name: \"\" }]);\n    };\n\n    const removeCredit = (index: number) => {\n        const newCredits = [...credits];\n        newCredits.splice(index, 1);\n        setCredits(newCredits);\n    };\n\n    const updateCredit = (index: number, field: \"role\" | \"name\", value: string) => {\n        const newCredits = [...credits];\n        newCredits[index][field] = value;\n        setCredits(newCredits);\n    };\n\n    return (\n        <form action={action} className=\"max-w-2xl space-y-8\">\n\n            {initialData?.id && <input type=\"hidden\" name=\"id\" value={initialData.id} />}\n            {/* Hidden input to pass credits as JSON string */}\n            <input type=\"hidden\" name=\"credits\" value={JSON.stringify(credits)} />\n\n            <div className=\"grid grid-cols-2 gap-8\">\n                <div>\n                    <label className=\"block font-mono text-xs uppercase text-gray-500 mb-2\">Título</label>\n                    <input\n                        type=\"text\"\n                        name=\"title\"\n                        defaultValue={initialData?.title}\n                        required\n                        className=\"w-full bg-transparent border-b border-white/20 py-2 focus:outline-none focus:border-accent text-xl font-sans\"\n                    />\n                </div>\n                <div>\n                    <label className=\"block font-mono text-xs uppercase text-gray-500 mb-2\">Slug</label>\n                    <input\n                        type=\"text\"\n                        name=\"slug\"\n                        defaultValue={initialData?.slug}\n                        required\n                        className=\"w-full bg-transparent border-b border-white/20 py-2 focus:outline-none focus:border-accent font-mono text-sm\"\n                    />\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-8\">\n                <div>\n                    <label className=\"block font-mono text-xs uppercase text-gray-500 mb-2\">Categoría</label>\n                    <div className=\"space-y-3\">\n                        <input\n                            type=\"text\"\n                            name=\"category\"\n                            value={category}\n                            onChange={(e) => setCategory(e.target.value)}\n                            required\n                            placeholder=\"Escribe o selecciona...\"\n                            className=\"w-full bg-transparent border-b border-white/20 py-2 focus:outline-none focus:border-accent font-mono text-sm\"\n                        />\n                        <div className=\"flex flex-wrap gap-2\">\n                            {[\"Narrativa\", \"Comercial\", \"Video Musical\", \"Spec\"].map((cat) => (\n                                <button\n                                    key={cat}\n                                    type=\"button\"\n                                    onClick={() => setCategory(cat)}\n                                    className={`text-[10px] font-mono uppercase px-3 py-1 border transition-colors ${category === cat\n                                            ? \"bg-accent border-accent text-white\"\n                                            : \"border-white/20 text-gray-400 hover:border-white hover:text-white\"\n                                        }`}\n                                >\n                                    {cat}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <label className=\"block font-mono text-xs uppercase text-gray-500 mb-2\">Año</label>\n                    <input\n                        type=\"text\"\n                        name=\"year\"\n                        defaultValue={initialData?.year || new Date().getFullYear()}\n                        required\n                        className=\"w-full bg-transparent border-b border-white/20 py-2 focus:outline-none focus:border-accent font-mono text-sm\"\n                    />\n                </div>\n            </div>\n\n            <div>\n                <label className=\"block font-mono text-xs uppercase text-gray-500 mb-2\">URL del Video (opcional)</label>\n                <input\n                    type=\"text\"\n                    name=\"videoUrl\"\n                    defaultValue={initialData?.videoUrl}\n                    placeholder=\"https://vimeo.com/...\"\n                    className=\"w-full bg-transparent border-b border-white/20 py-2 focus:outline-none focus:border-accent font-mono text-sm\"\n                />\n            </div>\n\n            <div>\n                <label className=\"block font-mono text-xs uppercase text-gray-500 mb-2\">Descripción</label>\n                <textarea\n                    name=\"description\"\n                    defaultValue={initialData?.description}\n                    rows={5}\n                    className=\"w-full bg-transparent border border-white/20 p-4 focus:outline-none focus:border-accent font-sans font-light\"\n                />\n            </div>\n\n            {/* Dynamic Credits Editor */}\n            <div>\n                <label className=\"block font-mono text-xs uppercase text-gray-500 mb-4\">Créditos</label>\n                <div className=\"space-y-4 mb-4\">\n                    {credits.map((credit: { role: string, name: string }, index: number) => (\n                        <div key={index} className=\"flex gap-4 items-end\">\n                            <div className=\"flex-1\">\n                                <label className=\"text-[10px] text-gray-600 block mb-1\">ROL</label>\n                                <input\n                                    type=\"text\"\n                                    value={credit.role}\n                                    onChange={(e) => updateCredit(index, \"role\", e.target.value)}\n                                    className=\"w-full bg-transparent border-b border-white/20 py-1 font-mono text-xs focus:outline-none focus:border-accent\"\n                                    placeholder=\"Director\"\n                                />\n                            </div>\n                            <div className=\"flex-1\">\n                                <label className=\"text-[10px] text-gray-600 block mb-1\">NOMBRE</label>\n                                <input\n                                    type=\"text\"\n                                    value={credit.name}\n                                    onChange={(e) => updateCredit(index, \"name\", e.target.value)}\n                                    className=\"w-full bg-transparent border-b border-white/20 py-1 font-sans text-sm focus:outline-none focus:border-accent\"\n                                    placeholder=\"Nombre\"\n                                />\n                            </div>\n                            <button\n                                type=\"button\"\n                                onClick={() => removeCredit(index)}\n                                className=\"text-xs text-red-500 hover:text-red-400 uppercase font-mono pb-1\"\n                            >\n                                X\n                            </button>\n                        </div>\n                    ))}\n                </div>\n                <button\n                    type=\"button\"\n                    onClick={addCredit}\n                    className=\"text-xs font-mono uppercase text-accent hover:text-white border border-accent hover:border-white px-4 py-2\"\n                >\n                    + Agregar Crédito\n                </button>\n            </div>\n\n            <div>\n                <label className=\"block font-mono text-xs uppercase text-gray-500 mb-2\">Miniatura (URL o Archivo)</label>\n                {initialData?.thumbnail && (\n                    <div className=\"mb-4\">\n                        <img src={initialData.thumbnail} alt=\"Current\" className=\"h-32 w-auto object-cover border border-white/10\" />\n                        <p className=\"text-[10px] text-gray-500 mt-1\">Imagen Actual</p>\n                    </div>\n                )}\n                <input\n                    type=\"file\"\n                    name=\"thumbnail\"\n                    accept=\"image/*\"\n                    className=\"w-full font-mono text-xs file:mr-4 file:py-2 file:px-4 file:border-0 file:text-xs file:bg-white file:text-black hover:file:bg-accent cursor-pointer\"\n                />\n            </div>\n\n            <div className=\"pt-8 flex items-center gap-4\">\n                <button\n                    type=\"submit\"\n                    className=\"bg-white text-black px-8 py-3 font-mono text-xs uppercase hover:bg-accent transition-colors\"\n                >\n                    {mode === \"create\" ? \"Crear Proyecto\" : \"Guardar Cambios\"}\n                </button>\n                <Link href=\"/admin\" className=\"text-xs font-mono uppercase text-gray-500 hover:text-white\">Cancelar</Link>\n            </div>\n        </form >\n    );\n}\n"],"names":[],"mappings":"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"}